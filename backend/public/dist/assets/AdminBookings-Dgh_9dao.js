import{r as x,j as e}from"./index-DgWF9MBv.js";import{m as s}from"./proxy-C2YUrH8b.js";const F=()=>{const[p,T]=x.useState([]),[c,v]=x.useState(!0),[C,u]=x.useState(null),[A,R]=x.useState(new Set),[w,D]=x.useState(typeof window<"u"?window.innerWidth:1024);x.useEffect(()=>{g();const t=setInterval(g,3e4);return()=>clearInterval(t)},[]),x.useEffect(()=>{if(typeof window>"u")return;const t=()=>D(window.innerWidth);return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const n=w<=1024,i=w<=640,g=async()=>{try{v(!0);const t=localStorage.getItem("token"),r=await fetch("https://molsongbsspaces.onrender.com/api/desk/all",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to fetch desks");const a=await r.json(),d=a.data||a,l=[];d.forEach(o=>{o.bookings&&o.bookings.length>0&&o.bookings.forEach(j=>{l.push({...j,deskId:o._id||o.id,deskName:o.name||o.locationId,locationId:o.locationId})})}),T(l),console.log("ðŸ“‹ All bookings found:",l)}catch(t){console.error("Error fetching bookings:",t)}finally{v(!1)}},y=t=>{t&&R(r=>{const a=new Set(r);return a.add(t),a})},L=async t=>{try{u(t._id);const r=localStorage.getItem("token");console.log("ðŸ”„ Accepting booking:",t);const a=await fetch(`https://molsongbsspaces.onrender.com/api/desk/${t.deskId}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({bookingId:t._id,status:"accepted"})}),d=await a.json().catch(()=>({}));console.log("ðŸ“¥ Response:",{status:a.status,data:d}),alert("âœ… Booking accepted!"),y(t._id),setTimeout(()=>{g()},1e3)}catch(r){console.error("Error accepting booking:",r),alert("Request sent - refreshing to verify..."),y(t._id),setTimeout(()=>{g()},1e3)}finally{u(null)}},E=async t=>{try{u(t._id);const r=localStorage.getItem("token");console.log("ðŸ”„ Declining booking:",t);const a=await fetch(`https://molsongbsspaces.onrender.com/api/desk/${t.deskId}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({bookingId:t._id,status:"declined"})}),d=await a.json().catch(()=>({}));console.log("ðŸ“¥ Response:",{status:a.status,data:d}),alert("âŒ Booking declined!"),y(t._id),setTimeout(()=>{g()},1e3)}catch(r){console.error("Error declining booking:",r),alert("Request sent - refreshing to verify..."),y(t._id),setTimeout(()=>{g()},1e3)}finally{u(null)}},k=t=>new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),z=t=>{if(t==null)return"N/A";const r=typeof t=="string"?t:String(t);return r.length<=10?r:`${r.slice(0,4)}...${r.slice(-4)}`},H=(t="pending")=>{switch(t){case"accepted":return{chipBg:"linear-gradient(135deg, #dcfce7, #bbf7d0)",chipBorder:"1px solid rgba(34, 197, 94, 0.35)",chipColor:"#166534",icon:"âœ“",label:"Accepted"};case"declined":return{chipBg:"linear-gradient(135deg, #fee2e2, #fecaca)",chipBorder:"1px solid rgba(239, 68, 68, 0.35)",chipColor:"#991b1b",icon:"âœ—",label:"Declined"};case"pending":default:return{chipBg:"linear-gradient(135deg, #fef3c7, #fde68a)",chipBorder:"1px solid rgba(251, 191, 36, 0.45)",chipColor:"#92400e",icon:"â³",label:"Pending"}}},b={background:"linear-gradient(135deg, rgba(255, 255, 255, 0.92), rgba(241, 245, 249, 0.96))",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"12px",padding:"12px 16px",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.6)"},m={background:"linear-gradient(135deg, #ffffff, #f8fafc)",border:"1px solid rgba(148, 163, 184, 0.25)",borderRadius:"16px",padding:"clamp(16px, 2vw, 20px) clamp(20px, 4vw, 28px)",minWidth:"min(200px, 100%)",boxShadow:"0 12px 24px rgba(15, 23, 42, 0.08)",textAlign:"center"},S={fontSize:"11px",color:"#64748b",textTransform:"uppercase",letterSpacing:"1px",fontWeight:"600",marginBottom:"6px"},I={fontSize:"13px",color:"#1e293b",fontWeight:"600",letterSpacing:"0.2px"},_={display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"999px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.18), rgba(14, 116, 144, 0.18))",border:"1px solid rgba(37, 99, 235, 0.24)",color:"#1d4ed8",fontSize:"12px",fontWeight:"600",letterSpacing:"0.3px"},$=p.filter(t=>(t.status||"pending")==="pending").length,P=p.filter(t=>t.status==="accepted").length,N=p.filter(t=>t.status==="declined").length;return e.jsxs("div",{style:{minHeight:"100vh",height:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #e0e7ff 45%, #dbeafe 100%)",padding:i?"24px 16px 36px":n?"32px 20px 44px":"40px 24px 52px",position:"relative",overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"auto"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.08,backgroundImage:`
            radial-gradient(circle at 12% 22%, rgba(0,103,172,0.35) 0%, transparent 22%),
            radial-gradient(circle at 88% 78%, rgba(246,221,88,0.35) 0%, transparent 22%),
            radial-gradient(circle at 50% 50%, rgba(2,132,199,0.25) 0%, transparent 28%)
          `,animation:"gradientShift 20s ease infinite",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"linear-gradient(rgba(148, 163, 184, 0.06) 1px, transparent 1px), linear-gradient(90deg, rgba(148, 163, 184, 0.06) 1px, transparent 1px)",backgroundSize:"48px 48px",opacity:.35,pointerEvents:"none"}}),e.jsxs("div",{style:{maxWidth:n?"100%":"1320px",margin:"0 auto",position:"relative",zIndex:1,width:"100%",padding:i?"0":"0 8px"},children:[e.jsx(s.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},style:{marginBottom:i?"26px":"36px"},children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:n?"center":"space-between",flexWrap:"wrap",gap:i?"16px":"20px",textAlign:n?"center":"left"},children:e.jsxs("div",{style:{display:"flex",alignItems:n?"center":"flex-start",gap:i?"14px":"18px",flexDirection:n?"column":"row"},children:[e.jsx(s.div,{animate:{rotate:[0,4,-4,0],scale:[1,1.04,1]},transition:{duration:2.4,repeat:1/0,repeatDelay:3},style:{background:"linear-gradient(135deg, #0067AC, #1d4ed8)",borderRadius:"14px",padding:"14px",boxShadow:"0 10px 25px rgba(30, 64, 175, 0.25)"},children:e.jsxs("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M12 3L2 9L12 15L22 9L12 3Z",stroke:"#bfdbfe",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 10V17C4 17.5304 4.21071 18.0391 4.58579 18.4142C4.96086 18.7893 5.46957 19 6 19H10",stroke:"#bfdbfe",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M20 10V14",stroke:"#bfdbfe",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M13.5 18V21",stroke:"#bfdbfe",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.5 18H16.5",stroke:"#bfdbfe",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{style:{textAlign:n?"center":"left"},children:[e.jsx("h1",{style:{fontSize:"34px",fontWeight:"800",background:"linear-gradient(135deg, #0f172a, #1d4ed8)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"-0.4px",margin:0},children:"Admin Bookings"}),e.jsx("p",{style:{color:"#475569",margin:"6px 0 0 0",fontSize:"16px",fontWeight:"500"},children:"Review and manage desk reservation requests across the workspace"})]})]})})}),e.jsxs(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},style:{display:"grid",gridTemplateColumns:i?"1fr":n?"repeat(2, minmax(0, 1fr))":"repeat(4, minmax(0, 1fr))",gap:i?"16px":"24px",marginBottom:i?"28px":"40px"},children:[e.jsxs(s.div,{whileHover:{y:-4,boxShadow:"0 16px 32px rgba(96, 165, 250, 0.22)"},style:{...m,border:"1px solid rgba(59, 130, 246, 0.2)",background:"linear-gradient(135deg, #eff6ff, #f8fafc)",height:"100%"},children:[e.jsx("div",{style:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"1.2px",fontWeight:"600",color:"#1d4ed8",marginBottom:"8px"},children:"Total Requests"}),e.jsx("div",{style:{fontSize:"36px",fontWeight:"700",color:"#0f172a",letterSpacing:"-0.5px",marginBottom:"6px"},children:c?"...":p.length}),e.jsx("div",{style:{fontSize:"12px",color:"rgba(15, 23, 42, 0.55)"},children:"All booking records fetched"})]}),e.jsxs(s.div,{whileHover:{y:-4,boxShadow:"0 16px 32px rgba(217, 119, 6, 0.18)"},style:{...m,border:"1px solid rgba(217, 119, 6, 0.25)",background:"linear-gradient(135deg, #fff7ed, #fffbeb)",height:"100%"},children:[e.jsx("div",{style:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"1.2px",fontWeight:"600",color:"#b45309",marginBottom:"8px"},children:"Pending Review"}),e.jsx("div",{style:{fontSize:"36px",fontWeight:"700",color:"#92400e",letterSpacing:"-0.5px",marginBottom:"6px"},children:c?"...":$}),e.jsx("div",{style:{fontSize:"12px",color:"rgba(180, 83, 9, 0.65)"},children:"Awaiting admin action"})]}),e.jsxs(s.div,{whileHover:{y:-4,boxShadow:"0 16px 32px rgba(34, 197, 94, 0.22)"},style:{...m,border:"1px solid rgba(34, 197, 94, 0.25)",background:"linear-gradient(135deg, #ecfdf5, #f0fdf4)",height:"100%"},children:[e.jsx("div",{style:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"1.2px",fontWeight:"600",color:"#166534",marginBottom:"8px"},children:"Approved"}),e.jsx("div",{style:{fontSize:"36px",fontWeight:"700",color:"#14532d",letterSpacing:"-0.5px",marginBottom:"6px"},children:c?"...":P}),e.jsx("div",{style:{fontSize:"12px",color:"rgba(22, 101, 52, 0.65)"},children:"Confirmed desk bookings"})]}),e.jsxs(s.div,{whileHover:{y:-4,boxShadow:"0 16px 32px rgba(248, 113, 113, 0.18)"},style:{...m,border:"1px solid rgba(248, 113, 113, 0.25)",background:"linear-gradient(135deg, #fef2f2, #fee2e2)",height:"100%"},children:[e.jsx("div",{style:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"1.2px",fontWeight:"600",color:"#b91c1c",marginBottom:"8px"},children:"Declined"}),e.jsx("div",{style:{fontSize:"36px",fontWeight:"700",color:"#991b1b",letterSpacing:"-0.5px",marginBottom:"6px"},children:c?"...":N}),e.jsx("div",{style:{fontSize:"12px",color:"rgba(185, 28, 28, 0.65)"},children:"Marked as unavailable"})]})]}),c&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},style:{background:"rgba(255, 255, 255, 0.85)",backdropFilter:"blur(14px)",border:"1px solid rgba(148, 163, 184, 0.25)",borderRadius:"20px",padding:i?"32px 24px":"48px",textAlign:"center",boxShadow:"0 20px 45px rgba(15, 23, 42, 0.12)"},children:[e.jsx("div",{style:{width:i?"42px":"50px",height:i?"42px":"50px",border:"3px solid rgba(14, 116, 144, 0.2)",borderTop:"3px solid #1d4ed8",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px",boxShadow:"0 0 15px rgba(29, 78, 216, 0.25)"}}),e.jsx("p",{style:{color:"#475569",fontSize:"14px",margin:0,letterSpacing:"0.5px"},children:"Loading booking data..."})]}),!c&&p.length===0&&e.jsxs(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},style:{background:"rgba(255, 255, 255, 0.88)",backdropFilter:"blur(14px)",border:"1px solid rgba(148, 163, 184, 0.24)",borderRadius:"20px",padding:i?"44px 24px":n?"60px 32px":"70px 36px",textAlign:"center",boxShadow:"0 20px 45px rgba(15, 23, 42, 0.12)"},children:[e.jsx(s.div,{animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},style:{fontSize:i?"52px":"64px",marginBottom:"20px",filter:"drop-shadow(0 0 18px rgba(34, 197, 94, 0.35))"},children:"âœ“"}),e.jsx("h2",{style:{fontSize:i?"24px":"28px",color:"#0f172a",marginBottom:"10px",fontWeight:"600",letterSpacing:"-0.5px"},children:"All Clear"}),e.jsx("p",{style:{color:"#475569",fontSize:"14px",margin:0,letterSpacing:"0.3px"},children:"No booking requests require your attention"})]}),!c&&p.length>0&&e.jsx("div",{style:{display:"grid",gap:i?"18px":"24px"},children:p.map((t,r)=>{const a=H(t.status||"pending"),d=t._id||t.id||`${t.deskId||"desk"}-${t.start||r}`,l=t._id,o=C===l,j=t.status==="accepted"||t.status==="declined"||A.has(l),f=t.status==="accepted",h=t.status==="declined";z(t.userId);const B=Array.isArray(t.attendees)?Array.from(new Set(t.attendees)):[];return e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05,duration:.4},whileHover:{y:-2,boxShadow:"0 18px 36px rgba(15, 23, 42, 0.14)"},style:{background:"linear-gradient(135deg, rgba(248, 250, 252, 0.96), rgba(255, 255, 255, 0.98))",border:"1px solid rgba(148, 163, 184, 0.25)",borderRadius:"18px",padding:i?"18px 18px":n?"20px 22px":"20px 24px",boxShadow:"0 14px 32px rgba(15, 23, 42, 0.1)",position:"relative",overflow:"hidden",transition:"all 0.3s ease"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:a.chipBg,opacity:.7}}),e.jsxs("div",{style:{position:"relative",zIndex:1,display:"flex",flexDirection:n?"column":"row",flexWrap:n?"nowrap":"wrap",gap:i?"18px":"24px",alignItems:"stretch",justifyContent:"space-between"},children:[e.jsxs("div",{style:{...b,padding:"18px",background:"linear-gradient(135deg, rgba(2, 132, 199, 0.08), rgba(14, 116, 144, 0.14))",border:"1px solid rgba(2, 132, 199, 0.18)",boxShadow:"0 10px 22px rgba(15, 23, 42, 0.08)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"8px",minWidth:n?"100%":"170px",flex:n?"1 1 100%":"0 1 210px",width:"100%"},children:[e.jsx("div",{style:{fontSize:"28px"},children:"ðŸª‘"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:"#0f172a",letterSpacing:"-0.2px"},children:t.deskName||t.locationId||"Desk"}),t.locationId&&t.deskName&&t.locationId!==t.deskName&&e.jsx("div",{style:{fontSize:"12px",color:"rgba(3, 105, 161, 0.65)",letterSpacing:"0.4px"},children:t.locationId}),e.jsx("div",{style:{fontSize:"11px",color:"rgba(3, 105, 161, 0.6)",letterSpacing:"0.4px",textTransform:"uppercase"},children:"Desk Reference"})]}),e.jsxs("div",{style:{flex:n?"1 1 100%":"1 1 320px",minWidth:n?"100%":"260px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:i?"column":"row",flexWrap:"wrap",alignItems:i?"flex-start":"center",gap:i?"8px":"10px",marginBottom:i?"12px":"14px"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"6px 14px",borderRadius:"999px",background:a.chipBg,border:a.chipBorder,color:a.chipColor,fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",boxShadow:"0 8px 16px rgba(15, 23, 42, 0.08)"},children:[e.jsx("span",{children:a.icon}),a.label]}),l&&e.jsxs("div",{style:{fontSize:"12px",color:"#94a3b8",letterSpacing:"0.4px"},children:["ID: ",l.slice(0,8),"..."]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"repeat(auto-fit, minmax(220px, 1fr))",gap:i?"12px":"16px"},children:[e.jsxs("div",{style:{...b,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.75), rgba(241, 245, 249, 0.9))"},children:[e.jsxs("div",{style:{...S,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"14px"},children:"ðŸ“…"}),"Start Time"]}),e.jsx("div",{style:I,children:k(t.start)})]}),e.jsxs("div",{style:{...b,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.75), rgba(241, 245, 249, 0.9))"},children:[e.jsxs("div",{style:{...S,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"14px"},children:"â°"}),"End Time"]}),e.jsx("div",{style:I,children:t.end?k(t.end):"Open ended"})]}),B.length>0?e.jsxs("div",{style:{...b,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.78), rgba(226, 232, 240, 0.85))"},children:[e.jsxs("div",{style:{...S,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"14px"},children:"ðŸ‘¥"}),"Attendees"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:B.map(W=>e.jsx("span",{style:_,children:z(W)},`${d}-attendee-${W}`))})]}):null]})]}),e.jsx("div",{style:{flex:n?"1 1 100%":"0 0 190px",minWidth:n?"100%":"190px",display:"flex",flexDirection:"column",gap:i?"10px":"12px"},children:j?e.jsxs("div",{style:{...b,padding:"20px",background:f?"linear-gradient(135deg, rgba(187, 247, 208, 0.75), rgba(220, 252, 231, 0.8))":h?"linear-gradient(135deg, rgba(254, 202, 202, 0.75), rgba(254, 226, 226, 0.8))":"linear-gradient(135deg, rgba(254, 240, 138, 0.7), rgba(253, 224, 71, 0.75))",border:f?"1px solid rgba(34, 197, 94, 0.35)":h?"1px solid rgba(239, 68, 68, 0.35)":"1px solid rgba(217, 119, 6, 0.3)",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"6px",minHeight:"110px"},children:[e.jsx("div",{style:{fontSize:"30px",color:f?"#166534":h?"#991b1b":"#92400e"},children:f?"âœ“":h?"âœ—":a.icon}),e.jsx("div",{style:{fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:f?"#166534":h?"#991b1b":"#92400e"},children:f?"Accepted":h?"Declined":"Processed"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(s.button,{whileHover:{y:-2,boxShadow:"0 16px 32px rgba(22, 163, 74, 0.25)"},whileTap:{scale:.98},onClick:()=>L(t),disabled:o,style:{padding:"12px 20px",background:"linear-gradient(135deg, rgba(74, 222, 128, 0.2), rgba(22, 163, 74, 0.3))",color:"#166534",border:"1px solid rgba(22, 163, 74, 0.35)",borderRadius:"12px",fontWeight:"600",cursor:o?"not-allowed":"pointer",opacity:o?.55:1,fontSize:"13px",boxShadow:"0 8px 18px rgba(22, 163, 74, 0.25)",transition:"all 0.25s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:n?"100%":"auto",letterSpacing:"0.6px",textTransform:"uppercase"},children:[e.jsx("span",{style:{fontSize:"16px"},children:"âœ“"}),"Accept"]}),e.jsxs(s.button,{whileHover:{y:-2,boxShadow:"0 16px 32px rgba(220, 38, 38, 0.25)"},whileTap:{scale:.98},onClick:()=>E(t),disabled:o,style:{padding:"12px 20px",background:"linear-gradient(135deg, rgba(248, 113, 113, 0.2), rgba(220, 38, 38, 0.3))",color:"#991b1b",border:"1px solid rgba(220, 38, 38, 0.35)",borderRadius:"12px",fontWeight:"600",cursor:o?"not-allowed":"pointer",opacity:o?.55:1,fontSize:"13px",boxShadow:"0 8px 18px rgba(220, 38, 38, 0.25)",transition:"all 0.25s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:n?"100%":"auto",letterSpacing:"0.6px",textTransform:"uppercase"},children:[e.jsx("span",{style:{fontSize:"16px"},children:"âœ—"}),"Decline"]}),o&&e.jsx("div",{style:{textAlign:"center",fontSize:"11px",color:"#64748b",letterSpacing:"0.4px"},children:"Working on it..."})]})})]})]},d)})})]}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes gradientShift {
          0%, 100% { transform: translate(0, 0); }
          50% { transform: translate(30px, 30px); }
        }
      `})]})};export{F as default};
